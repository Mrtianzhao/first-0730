<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="net.dgg.cloud.dao.CallRecordMapper">
    <resultMap id="BaseResultMap" type="net.dgg.cloud.entity.CallRecord">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        <id column="call_id" property="callId" jdbcType="VARCHAR"/>
        <result column="app_id" property="appId" jdbcType="VARCHAR"/>
        <result column="caller_num" property="callerNum" jdbcType="VARCHAR"/>
        <result column="callee_num" property="calleeNum" jdbcType="VARCHAR"/>
        <result column="serving_num" property="servingNum" jdbcType="VARCHAR"/>
        <result column="y_num" property="yNum" jdbcType="VARCHAR"/>
        <result column="start_time" property="startTime" jdbcType="VARCHAR"/>
        <result column="end_time" property="endTime" jdbcType="VARCHAR"/>
        <result column="answer_time" property="answerTime" jdbcType="VARCHAR"/>
        <result column="result" property="result" jdbcType="VARCHAR"/>
        <result column="releasedir" property="releasedir" jdbcType="VARCHAR"/>
        <result column="duration" property="duration" jdbcType="INTEGER"/>
        <result column="calltype" property="calltype" jdbcType="VARCHAR"/>
        <result column="mapping_id" property="mappingId" jdbcType="VARCHAR"/>
        <result column="callee_ring_time" property="calleeRingTime" jdbcType="VARCHAR"/>
        <result column="record_url" property="recordUrl" jdbcType="VARCHAR"/>
        <result column="user_data" property="userData" jdbcType="VARCHAR"/>
        <result column="salesman_id" property="salesmanId" jdbcType="VARCHAR"/>
    </resultMap>
    <sql id="Base_Column_List">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        call_id, app_id, caller_num, callee_num, serving_num, y_num, start_time, end_time,
        answer_time, result, releasedir, duration, calltype, mapping_id, callee_ring_time,
        record_url, user_data, salesman_id
    </sql>
    <select id="selectByPrimaryKey" resultMap="BaseResultMap" parameterType="java.lang.String">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        select
        <include refid="Base_Column_List"/>
        from call_record
        where call_id = #{callId,jdbcType=VARCHAR}
    </select>
    <delete id="deleteByPrimaryKey" parameterType="java.lang.String">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        delete from call_record
        where call_id = #{callId,jdbcType=VARCHAR}
    </delete>
    <insert id="insert" parameterType="net.dgg.cloud.entity.CallRecord">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        insert into call_record (call_id, app_id, caller_num,
        callee_num, serving_num, y_num,
        start_time, end_time, answer_time,
        result, releasedir, duration,
        calltype, mapping_id, callee_ring_time,
        record_url, user_data, salesman_id)
        values (#{callId,jdbcType=VARCHAR}, #{appId,jdbcType=VARCHAR}, #{callerNum,jdbcType=VARCHAR},
        #{calleeNum,jdbcType=VARCHAR}, #{servingNum,jdbcType=VARCHAR}, #{yNum,jdbcType=VARCHAR},
        #{startTime,jdbcType=VARCHAR}, #{endTime,jdbcType=VARCHAR}, #{answerTime,jdbcType=VARCHAR},
        #{result,jdbcType=VARCHAR}, #{releasedir,jdbcType=VARCHAR}, #{duration,jdbcType=INTEGER},
        #{calltype,jdbcType=VARCHAR}, #{mappingId,jdbcType=VARCHAR}, #{calleeRingTime,jdbcType=VARCHAR},
        #{recordUrl,jdbcType=VARCHAR}, #{userData,jdbcType=VARCHAR}, #{salesmanId,jdbcType=VARCHAR})
    </insert>
    <insert id="insertSelective" parameterType="net.dgg.cloud.entity.CallRecord">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        insert into call_record
        <trim prefix="(" suffix=")" suffixOverrides=",">
            <if test="callId != null">
                call_id,
            </if>
            <if test="appId != null">
                app_id,
            </if>
            <if test="callerNum != null">
                caller_num,
            </if>
            <if test="calleeNum != null">
                callee_num,
            </if>
            <if test="servingNum != null">
                serving_num,
            </if>
            <if test="yNum != null">
                y_num,
            </if>
            <if test="startTime != null">
                start_time,
            </if>
            <if test="endTime != null">
                end_time,
            </if>
            <if test="answerTime != null">
                answer_time,
            </if>
            <if test="result != null">
                result,
            </if>
            <if test="releasedir != null">
                releasedir,
            </if>
            <if test="duration != null">
                duration,
            </if>
            <if test="calltype != null">
                calltype,
            </if>
            <if test="mappingId != null">
                mapping_id,
            </if>
            <if test="calleeRingTime != null">
                callee_ring_time,
            </if>
            <if test="recordUrl != null">
                record_url,
            </if>
            <if test="userData != null">
                user_data,
            </if>
            <if test="salesmanId != null">
                salesman_id,
            </if>
        </trim>
        <trim prefix="values (" suffix=")" suffixOverrides=",">
            <if test="callId != null">
                #{callId,jdbcType=VARCHAR},
            </if>
            <if test="appId != null">
                #{appId,jdbcType=VARCHAR},
            </if>
            <if test="callerNum != null">
                #{callerNum,jdbcType=VARCHAR},
            </if>
            <if test="calleeNum != null">
                #{calleeNum,jdbcType=VARCHAR},
            </if>
            <if test="servingNum != null">
                #{servingNum,jdbcType=VARCHAR},
            </if>
            <if test="yNum != null">
                #{yNum,jdbcType=VARCHAR},
            </if>
            <if test="startTime != null">
                #{startTime,jdbcType=VARCHAR},
            </if>
            <if test="endTime != null">
                #{endTime,jdbcType=VARCHAR},
            </if>
            <if test="answerTime != null">
                #{answerTime,jdbcType=VARCHAR},
            </if>
            <if test="result != null">
                #{result,jdbcType=VARCHAR},
            </if>
            <if test="releasedir != null">
                #{releasedir,jdbcType=VARCHAR},
            </if>
            <if test="duration != null">
                #{duration,jdbcType=INTEGER},
            </if>
            <if test="calltype != null">
                #{calltype,jdbcType=VARCHAR},
            </if>
            <if test="mappingId != null">
                #{mappingId,jdbcType=VARCHAR},
            </if>
            <if test="calleeRingTime != null">
                #{calleeRingTime,jdbcType=VARCHAR},
            </if>
            <if test="recordUrl != null">
                #{recordUrl,jdbcType=VARCHAR},
            </if>
            <if test="userData != null">
                #{userData,jdbcType=VARCHAR},
            </if>
            <if test="salesmanId != null">
                #{salesmanId,jdbcType=VARCHAR},
            </if>
        </trim>
    </insert>
    <update id="updateByPrimaryKeySelective" parameterType="net.dgg.cloud.entity.CallRecord">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        update call_record
        <set>
            <if test="appId != null">
                app_id = #{appId,jdbcType=VARCHAR},
            </if>
            <if test="callerNum != null">
                caller_num = #{callerNum,jdbcType=VARCHAR},
            </if>
            <if test="calleeNum != null">
                callee_num = #{calleeNum,jdbcType=VARCHAR},
            </if>
            <if test="servingNum != null">
                serving_num = #{servingNum,jdbcType=VARCHAR},
            </if>
            <if test="yNum != null">
                y_num = #{yNum,jdbcType=VARCHAR},
            </if>
            <if test="startTime != null">
                start_time = #{startTime,jdbcType=VARCHAR},
            </if>
            <if test="endTime != null">
                end_time = #{endTime,jdbcType=VARCHAR},
            </if>
            <if test="answerTime != null">
                answer_time = #{answerTime,jdbcType=VARCHAR},
            </if>
            <if test="result != null">
                result = #{result,jdbcType=VARCHAR},
            </if>
            <if test="releasedir != null">
                releasedir = #{releasedir,jdbcType=VARCHAR},
            </if>
            <if test="duration != null">
                duration = #{duration,jdbcType=INTEGER},
            </if>
            <if test="calltype != null">
                calltype = #{calltype,jdbcType=VARCHAR},
            </if>
            <if test="mappingId != null">
                mapping_id = #{mappingId,jdbcType=VARCHAR},
            </if>
            <if test="calleeRingTime != null">
                callee_ring_time = #{calleeRingTime,jdbcType=VARCHAR},
            </if>
            <if test="recordUrl != null">
                record_url = #{recordUrl,jdbcType=VARCHAR},
            </if>
            <if test="userData != null">
                user_data = #{userData,jdbcType=VARCHAR},
            </if>
            <if test="salesmanId != null">
                salesman_id = #{salesmanId,jdbcType=VARCHAR},
            </if>
        </set>
        where call_id = #{callId,jdbcType=VARCHAR}
    </update>
    <update id="updateByPrimaryKey" parameterType="net.dgg.cloud.entity.CallRecord">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        update call_record
        set app_id = #{appId,jdbcType=VARCHAR},
        caller_num = #{callerNum,jdbcType=VARCHAR},
        callee_num = #{calleeNum,jdbcType=VARCHAR},
        serving_num = #{servingNum,jdbcType=VARCHAR},
        y_num = #{yNum,jdbcType=VARCHAR},
        start_time = #{startTime,jdbcType=VARCHAR},
        end_time = #{endTime,jdbcType=VARCHAR},
        answer_time = #{answerTime,jdbcType=VARCHAR},
        result = #{result,jdbcType=VARCHAR},
        releasedir = #{releasedir,jdbcType=VARCHAR},
        duration = #{duration,jdbcType=INTEGER},
        calltype = #{calltype,jdbcType=VARCHAR},
        mapping_id = #{mappingId,jdbcType=VARCHAR},
        callee_ring_time = #{calleeRingTime,jdbcType=VARCHAR},
        record_url = #{recordUrl,jdbcType=VARCHAR},
        user_data = #{userData,jdbcType=VARCHAR}
        salesman_id = #{salesmanId,jdbcType=VARCHAR}
        where call_id = #{callId,jdbcType=VARCHAR}
    </update>

    <!-- 统计商务本月电话量 -->
    <select id="selectCallCountByMonth" resultType="int" parameterType="java.lang.String">
    SELECT IFNULL(COUNT(call_id),0)
    FROM call_record
    WHERE salesman_id = #{salesmanId}
    AND DATE_FORMAT(start_time,'%Y%M') = DATE_FORMAT(NOW(),'%Y%M')
    </select>
</mapper>